<!doctype html>
<html lang="vi">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover"/>
  <title>H·ªá sinh th√°i TPCN thi√™n nhi√™n ‚Ä¢ T∆∞ v·∫•n c√πng AI</title>
  <meta name="description" content="Landing page gi·ªõi thi·ªáu h·ªá sinh th√°i th·ª±c ph·∫©m ch·ª©c nƒÉng thi√™n nhi√™n. T∆∞ v·∫•n nhanh c√πng Tr·ª£ l√Ω AI (CSKH + b√°n h√†ng)."/>
  <style>
    :root{
      /* Natural TPCN palette üåø */
      --bg: #f6f8f3;
      --card:#ffffff;
      --text:#1f2937;
      --muted:#6b7280;
      --line: rgba(17,24,39,.10);

      --primary:#2f6f4e;
      --primary2:#24563c;
      --accent:#6fbf8f;
      --soft:#eef6f0;

      --shadow: 0 20px 60px rgba(17,24,39,.12);
      --r:18px;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial;
      color:var(--text);
      background:
        radial-gradient(900px 500px at 10% -10%, rgba(111,191,143,.20), transparent 55%),
        radial-gradient(900px 500px at 90% 0%, rgba(47,111,78,.12), transparent 55%),
        var(--bg);
    }
    a{color:inherit}
    .container{
      width:min(1120px, calc(100% - 32px));
      margin:0 auto;
    }

    /* ===== Header ===== */
    header{
      position:sticky;
      top:0;
      z-index:20;
      backdrop-filter: blur(10px);
      background: rgba(246,248,243,.78);
      border-bottom: 1px solid var(--line);
    }
    .nav{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:14px;
      padding:14px 0;
    }
    .brand{
      display:flex; align-items:center; gap:10px; min-width:0;
      text-decoration:none;
    }
    .logo{
      width:38px;height:38px;border-radius:14px;
      display:grid;place-items:center;
      background: linear-gradient(180deg, rgba(47,111,78,.18), rgba(111,191,143,.18));
      border:1px solid rgba(47,111,78,.20);
      font-weight:900;
      letter-spacing:.3px;
    }
    .brandText{display:flex; flex-direction:column; gap:2px; min-width:0}
    .brandText b{font-size:14px}
    .brandText span{font-size:12px;color:var(--muted);white-space:nowrap;overflow:hidden;text-overflow:ellipsis}

    .navRight{display:flex; gap:10px; align-items:center}
    .pill{
      font-size:12px;
      padding:9px 11px;
      border-radius:999px;
      border:1px solid var(--line);
      background: rgba(255,255,255,.60);
      text-decoration:none;
      color:var(--text);
    }
    .btn{
      border:0;
      cursor:pointer;
      padding:10px 14px;
      border-radius:999px;
      background: linear-gradient(180deg, var(--primary), var(--primary2));
      color:#fff;
      font-weight:800;
      box-shadow: 0 10px 24px rgba(47,111,78,.18);
      display:flex; align-items:center; gap:8px;
      white-space:nowrap;
    }
    .btn:active{transform: translateY(1px);}
    .btn svg{width:16px;height:16px}

    /* ===== Hero ===== */
    .hero{
      padding:44px 0 16px;
    }
    .heroGrid{
      display:grid;
      grid-template-columns: 1.2fr .8fr;
      gap:18px;
      align-items:stretch;
    }
    .heroCard{
      background: linear-gradient(180deg, rgba(255,255,255,.90), rgba(255,255,255,.78));
      border:1px solid var(--line);
      border-radius: var(--r);
      box-shadow: var(--shadow);
      padding:22px;
    }
    .kicker{
      display:inline-flex;
      gap:8px;
      align-items:center;
      padding:6px 10px;
      border-radius:999px;
      background: var(--soft);
      border:1px solid rgba(47,111,78,.15);
      color: rgba(47,111,78,.95);
      font-weight:700;
      font-size:12px;
    }
    h1{
      margin:12px 0 10px;
      font-size: clamp(26px, 3.2vw, 38px);
      line-height:1.14;
      letter-spacing:-.2px;
    }
    .lead{
      margin:0 0 16px;
      color:var(--muted);
      font-size:15px;
      line-height:1.55;
    }
    .heroActions{
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      align-items:center;
      margin-top:14px;
    }
    .ghost{
      background: rgba(255,255,255,.68);
      border:1px solid rgba(47,111,78,.20);
      color: var(--primary2);
      box-shadow:none;
      font-weight:800;
    }
    .trust{
      margin-top:14px;
      display:flex;
      gap:12px;
      flex-wrap:wrap;
      color:var(--muted);
      font-size:12px;
    }
    .trust b{color:var(--text)}
    .sideCard{
      display:flex;
      flex-direction:column;
      justify-content:space-between;
      gap:12px;
      background: linear-gradient(180deg, rgba(47,111,78,.08), rgba(255,255,255,.75));
      border:1px solid rgba(47,111,78,.16);
      border-radius: var(--r);
      box-shadow: var(--shadow);
      padding:18px;
      overflow:hidden;
      position:relative;
    }
    .sideCard:before{
      content:"";
      position:absolute;
      inset:-80px -80px auto auto;
      width:240px;height:240px;border-radius:50%;
      background: radial-gradient(circle at 40% 40%, rgba(111,191,143,.35), transparent 58%);
    }
    .sideCard h3{
      margin:0 0 6px;
      font-size:16px;
    }
    .steps{margin:0;padding-left:18px;color:var(--muted);font-size:13px;line-height:1.55}
    .steps li{margin:6px 0}

    /* ===== Sections ===== */
    section{padding:18px 0}
    .secTitle{
      display:flex; align-items:flex-end; justify-content:space-between;
      gap:12px; flex-wrap:wrap;
      margin:0 0 12px;
    }
    .secTitle h2{margin:0;font-size:18px}
    .secTitle p{margin:0;color:var(--muted);font-size:13px}

    .grid3{
      display:grid;
      grid-template-columns: repeat(3, 1fr);
      gap:12px;
    }
    .card{
      background: var(--card);
      border:1px solid var(--line);
      border-radius: var(--r);
      box-shadow: 0 12px 35px rgba(17,24,39,.08);
      padding:16px;
    }
    .card b{display:block;margin-bottom:6px}
    .card p{margin:0;color:var(--muted);font-size:13px;line-height:1.55}

    .tags{display:flex;flex-wrap:wrap;gap:8px;margin-top:10px}
    .tag{
      font-size:12px;
      padding:6px 10px;
      border-radius:999px;
      background: var(--soft);
      border:1px solid rgba(47,111,78,.14);
      color: rgba(47,111,78,.92);
      font-weight:700;
    }

    /* ===== Footer ===== */
    footer{
      padding:22px 0 90px; /* leave room for chat btn on mobile */
      color:var(--muted);
      font-size:12px;
    }
    .footRow{
      display:flex;
      justify-content:space-between;
      gap:12px;
      flex-wrap:wrap;
      border-top:1px solid var(--line);
      padding-top:16px;
    }

    /* ===== Chat launcher (fixed) ===== */
    .chatLauncher{
      position:fixed;
      right:16px;
      bottom: max(16px, env(safe-area-inset-bottom));
      z-index:50;
      display:flex;
      gap:10px;
      align-items:center;
    }
    .launcherBtn{
      display:flex; align-items:center; gap:10px;
      padding:12px 14px;
      border-radius:999px;
      border:0;
      cursor:pointer;
      background: linear-gradient(180deg, var(--primary), var(--primary2));
      color:#fff;
      font-weight:900;
      box-shadow: 0 18px 45px rgba(47,111,78,.22);
      white-space:nowrap;
    }
    .launcherBtn small{font-weight:700;opacity:.9}
    .launcherBtn svg{width:18px;height:18px}
    .launcherHint{
      display:none;
      padding:10px 12px;
      border-radius:999px;
      background: rgba(255,255,255,.78);
      border:1px solid var(--line);
      color: var(--text);
      box-shadow: 0 12px 30px rgba(17,24,39,.10);
      font-size:12px;
    }
    @media (min-width: 900px){
      .launcherHint{display:block}
    }

    /* ===== Chat modal / widget ===== */
    .overlay{
      position:fixed; inset:0;
      background: rgba(17,24,39,.35);
      backdrop-filter: blur(6px);
      z-index:60;
      display:none;
      align-items:flex-end;
      justify-content:flex-end;
      padding:16px;
      padding-bottom: max(16px, env(safe-area-inset-bottom));
    }
    .overlay.show{display:flex;}
    .widget{
      width: min(430px, calc(100vw - 32px));
      height: min(640px, calc(100vh - 120px));
      border-radius: 18px;
      background: rgba(255,255,255,.92);
      border:1px solid var(--line);
      box-shadow: var(--shadow);
      overflow:hidden;
      display:flex;
      flex-direction:column;
    }
    .wTop{
      display:flex; align-items:center; justify-content:space-between; gap:10px;
      padding:12px 12px;
      background: rgba(255,255,255,.92);
      border-bottom:1px solid var(--line);
    }
    .wTitle{display:flex; flex-direction:column; gap:2px; min-width:0}
    .wTitle b{font-size:13px}
    .wTitle small{font-size:12px;color:var(--muted);white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
    .statusDot{display:inline-block;width:7px;height:7px;border-radius:50%;background:#22c55e;margin-right:6px;transform: translateY(-1px);}
    .statusDot.off{background:#ef4444;}
    .wBtns{display:flex; gap:8px; align-items:center}
    .iconBtn{
      width:34px;height:34px;border-radius:12px;
      border:1px solid var(--line);
      background: rgba(47,111,78,.06);
      cursor:pointer;
      color: var(--primary2);
    }
    .iconBtn:hover{background: rgba(47,111,78,.10);}
    .wBody{
      flex:1;
      overflow:auto;
      padding:12px;
      background: linear-gradient(180deg, rgba(238,246,240,.60), rgba(246,248,243,.60));
    }

    .msg{display:flex; margin:10px 0;}
    .msg.me{justify-content:flex-end}
    .bubble{
      max-width: 86%;
      padding:10px 12px;
      border-radius:14px;
      border:1px solid rgba(17,24,39,.10);
      background: rgba(255,255,255,.86);
      white-space:pre-wrap;
      line-height:1.45;
      font-size:14px;
    }
    .me .bubble{
      background: rgba(111,191,143,.18);
      border-color: rgba(47,111,78,.18);
    }
    .wDock{
      padding:12px;
      border-top:1px solid var(--line);
      background: rgba(255,255,255,.92);
    }
    .composer{display:flex; gap:10px; align-items:flex-end;}
    textarea{
      flex:1;
      min-height:44px;
      max-height:110px;
      resize:vertical;
      padding:10px 12px;
      border-radius:14px;
      border:1px solid rgba(17,24,39,.14);
      background: #fff;
      color: var(--text);
      outline:none;
      font-size:14px;
      line-height:1.35;
    }
    textarea::placeholder{color:rgba(107,114,128,.9)}
    .sendBtn{
      height:44px;
      padding:0 14px;
      border-radius:14px;
      border:0;
      background: linear-gradient(180deg, var(--primary), var(--primary2));
      color:#fff;
      cursor:pointer;
      font-weight:900;
      display:flex; align-items:center; gap:8px;
      box-shadow: 0 10px 26px rgba(47,111,78,.20);
      white-space:nowrap;
    }
    .sendBtn:disabled{opacity:.65; cursor:not-allowed; box-shadow:none}
    .sub{
      margin-top:8px;
      display:flex;
      justify-content:space-between;
      gap:10px;
      flex-wrap:wrap;
      font-size:12px;
      color: var(--muted);
    }
    .sub a{color: var(--primary2); text-decoration:none; font-weight:800}

    /* typing */
    .typing{
      display:flex; align-items:center; gap:8px;
      font-size:12px; color:var(--muted);
      padding:4px 2px 0;
    }
    .dots{display:flex; gap:4px; align-items:center}
    .dots i{
      width:6px;height:6px;border-radius:50%;
      background: rgba(107,114,128,.55);
      animation: b 1.1s infinite ease-in-out;
    }
    .dots i:nth-child(2){animation-delay:.15s}
    .dots i:nth-child(3){animation-delay:.3s}
    @keyframes b{
      0%,80%,100%{transform: translateY(0); opacity:.55}
      40%{transform: translateY(-4px); opacity:1}
    }

    @media (max-width: 860px){
      .heroGrid{grid-template-columns: 1fr; }
    }
    @media (max-width: 720px){
      .grid3{grid-template-columns: 1fr; }
    }
  
    .ctaBar{
      padding: 10px 14px;
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      border-top:1px solid rgba(255,255,255,.10);
      background: rgba(255,255,255,.02);
    }
    .ctaBtn{
      display:inline-flex; align-items:center; gap:8px;
      padding:10px 12px;
      border-radius:999px;
      border:1px solid rgba(16,86,52,.22);
      background: rgba(16,86,52,.08);
      color: #0f5132;
      font-weight:700;
      cursor:pointer;
      text-decoration:none;
      user-select:none;
    }
    .ctaBtn.primary{
      border-color: rgba(16,86,52,.35);
      background: rgba(16,86,52,.14);
    }
    .ctaBtn:hover{filter:brightness(1.02)}
    .ctaBtn .dot{width:8px;height:8px;border-radius:999px;background:#22c55e}
</style>
</head>
<body>

<header>
  <div class="container">
    <div class="nav">
      <a class="brand" href="#top">
        <div class="logo">üåø</div>
        <div class="brandText">
          <b>H·ªá sinh th√°i TPCN thi√™n nhi√™n</b>
          <span>T∆∞ v·∫•n nhanh c√πng Tr·ª£ l√Ω AI ‚Ä¢ CSKH + b√°n h√†ng</span>
        </div>
      </a>
      <div class="navRight">
        <a class="pill" href="/health" target="_blank" rel="noopener">Health</a>
        <button class="btn" id="btnOpenTop" type="button" aria-label="T∆∞ v·∫•n c√πng AI">
          <svg viewBox="0 0 24 24" fill="none"><path d="M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12c0 1.784.468 3.457 1.287 4.904.154.27.204.587.117.89l-.806 2.79a.9.9 0 0 0 1.11 1.11l2.79-.806c.303-.087.62-.037.89.117A9.95 9.95 0 0 0 12 22Z" stroke="currentColor" stroke-width="1.8"/></svg>
          <span>T∆∞ v·∫•n c√πng AI</span>
        </button>
      </div>
    </div>
  </div>
</header>

<main id="top">
  <div class="container">
    <div class="hero">
      <div class="heroGrid">
        <div class="heroCard">
          <div class="kicker">üå± T·ª± nhi√™n ‚Ä¢ Minh b·∫°ch ‚Ä¢ D·ªÖ d√πng</div>
          <h1>Gi·ªõi thi·ªáu h·ªá sinh th√°i TPCN thi√™n nhi√™n<br/>h·ªó tr·ª£ s·ª©c kh·ªèe m·ªói ng√†y</h1>
          <p class="lead">
            Ch√∫ng t√¥i x√¢y d·ª±ng h·ªá sinh th√°i s·∫£n ph·∫©m t·ª´ nguy√™n li·ªáu t·ª± nhi√™n, quy tr√¨nh r√µ r√†ng v√† t∆∞ v·∫•n minh b·∫°ch.
            Tr·ª£ l√Ω AI gi√∫p anh/ch·ªã <b>ch·ªçn s·∫£n ph·∫©m/combo ph√π h·ª£p</b>, <b>h∆∞·ªõng d·∫´n mua h√†ng</b> v√† <b>k·∫øt n·ªëi CSKH</b> khi c·∫ßn.
          </p>
          <div class="heroActions">
            <button class="btn" id="btnOpenHero" type="button">
              <svg viewBox="0 0 24 24" fill="none"><path d="M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12c0 1.784.468 3.457 1.287 4.904.154.27.204.587.117.89l-.806 2.79a.9.9 0 0 0 1.11 1.11l2.79-.806c.303-.087.62-.037.89.117A9.95 9.95 0 0 0 12 22Z" stroke="currentColor" stroke-width="1.8"/></svg>
              <span>T∆∞ v·∫•n c√πng AI</span>
            </button>
            <button class="btn ghost" id="btnScroll" type="button">Xem h·ªá sinh th√°i</button>
          </div>
          <div class="trust">
            <span>‚úÖ <b>Kh√¥ng</b> cam k·∫øt ‚Äúkh·ªèi b·ªánh‚Äù</span>
            <span>‚úÖ T∆∞ v·∫•n theo <b>d·ªØ li·ªáu s·∫£n ph·∫©m</b></span>
            <span>‚úÖ C√≥ <b>hotline/fanpage</b> khi c·∫ßn</span>
          </div>
        </div>

        <div class="sideCard">
          <div>
            <h3>AI t∆∞ v·∫•n theo 3 b∆∞·ªõc</h3>
            <ol class="steps">
              <li>AI h·ªèi 1‚Äì2 c√¢u ƒë·ªÉ hi·ªÉu nhu c·∫ßu (n·∫øu c·∫ßn).</li>
              <li>ƒê·ªëi chi·∫øu d·ªØ li·ªáu s·∫£n ph·∫©m/combo c·ªßa doanh nghi·ªáp.</li>
              <li>ƒê·ªÅ xu·∫•t ph∆∞∆°ng √°n + h∆∞·ªõng d·∫´n mua/ƒë·∫∑t h√†ng.</li>
            </ol>
          </div>
          <div class="tags">
            <span class="tag">ƒê∆∞·ªùng huy·∫øt</span>
            <span class="tag">D·∫° d√†y</span>
            <span class="tag">M·ª° m√°u</span>
            <span class="tag">Gan</span>
            <span class="tag">X∆∞∆°ng kh·ªõp</span>
            <span class="tag">Gi·∫•c ng·ªß</span>
          </div>
        </div>
      </div>
    </div>

    <section id="ecosystem">
      <div class="secTitle">
        <h2>H·ªá sinh th√°i s·∫£n ph·∫©m</h2>
        <p>Nh√≥m c√¥ng d·ª•ng ph·ªï bi·∫øn ‚Ä¢ T∆∞ v·∫•n combo/s·∫£n ph·∫©m theo nhu c·∫ßu</p>
      </div>
      <div class="grid3">
        <div class="card">
          <b>üåø Nh√≥m chuy·ªÉn ho√°</b>
          <p>H·ªó tr·ª£ ƒë∆∞·ªùng huy·∫øt, m·ª° m√°u, gan‚Ä¶ t∆∞ v·∫•n theo th√≥i quen ƒÉn u·ªëng v√† m·ª•c ti√™u.</p>
        </div>
        <div class="card">
          <b>üåø Nh√≥m ti√™u ho√°</b>
          <p>H·ªó tr·ª£ d·∫° d√†y, tr√†o ng∆∞·ª£c, men vi sinh‚Ä¶ g·ª£i √Ω theo th·ªùi ƒëi·ªÉm ƒëau v√† sinh ho·∫°t.</p>
        </div>
        <div class="card">
          <b>üåø Nh√≥m x∆∞∆°ng kh·ªõp</b>
          <p>H·ªó tr·ª£ v·∫≠n ƒë·ªông, gi·∫£m kh√≥ ch·ªãu‚Ä¶ g·ª£i √Ω li·ªáu tr√¨nh theo m·ª©c ƒë·ªô v√† ƒë·ªô tu·ªïi.</p>
        </div>
        <div class="card">
          <b>üåø Nh√≥m mi·ªÖn d·ªãch</b>
          <p>H·ªó tr·ª£ ƒë·ªÅ kh√°ng theo m√πa, theo t√¨nh tr·∫°ng c∆° th·ªÉ‚Ä¶ ∆∞u ti√™n d√πng d·ªÖ, ph√π h·ª£p.</p>
        </div>
        <div class="card">
          <b>üåø Nh√≥m gi·∫•c ng·ªß & tinh th·∫ßn</b>
          <p>H·ªó tr·ª£ ng·ªß ngon, th∆∞ gi√£n‚Ä¶ t∆∞ v·∫•n theo l·ªãch ng·ªß v√† m·ª©c ƒë·ªô stress.</p>
        </div>
        <div class="card">
          <b>üåø Nh√≥m l√†m ƒë·∫πp</b>
          <p>H·ªó tr·ª£ da, t√≥c‚Ä¶ g·ª£i √Ω theo m·ª•c ti√™u v√† th·ªùi gian mong mu·ªën c·∫£i thi·ªán.</p>
        </div>
      </div>
    </section>

    <section>
      <div class="secTitle">
        <h2>Minh b·∫°ch & an to√†n</h2>
        <p>Tr·ª£ l√Ω AI kh√¥ng thay th·∫ø b√°c sƒ© ‚Ä¢ T∆∞ v·∫•n theo d·ªØ li·ªáu doanh nghi·ªáp</p>
      </div>
      <div class="grid3">
        <div class="card">
          <b>üìå Kh√¥ng ch·∫©n ƒëo√°n</b>
          <p>AI ch·ªâ h·ªó tr·ª£ l·ª±a ch·ªçn s·∫£n ph·∫©m/combo; kh√¥ng ƒë∆∞a ra ch·∫©n ƒëo√°n b·ªánh.</p>
        </div>
        <div class="card">
          <b>üìå Kh√¥ng ‚Äúh·ª©a kh·ªèi‚Äù</b>
          <p>Kh√¥ng cam k·∫øt k·∫øt qu·∫£; ch·ªâ d√πng ng√¥n ng·ªØ ‚Äúh·ªó tr·ª£/c·∫£i thi·ªán‚Äù.</p>
        </div>
        <div class="card">
          <b>üìå K·∫øt n·ªëi CSKH</b>
          <p>N·ªôi dung kinh doanh/ph·ª©c t·∫°p s·∫Ω ƒëi·ªÅu h∆∞·ªõng hotline/fanpage ƒë·ªÉ h·ªó tr·ª£ nhanh.</p>
        </div>
      </div>
    </section>

    <footer>
      <div class="footRow">
        <div>¬© Demo Landing Page ‚Ä¢ H·ªá sinh th√°i TPCN thi√™n nhi√™n</div>
        <div>Tr·ª£ l√Ω AI: CSKH + b√°n h√†ng ‚Ä¢ K·∫øt n·ªëi hotline/fanpage khi c·∫ßn</div>
      </div>
    </footer>
  </div>
</main>

<!-- Launcher -->
<div class="chatLauncher" aria-label="Chat launcher">
  <div class="launcherHint">C·∫ßn t∆∞ v·∫•n? Nh·∫•n ƒë·ªÉ chat v·ªõi AI üåø</div>
  <button class="launcherBtn" id="btnOpen" type="button">
    <svg viewBox="0 0 24 24" fill="none"><path d="M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12c0 1.784.468 3.457 1.287 4.904.154.27.204.587.117.89l-.806 2.79a.9.9 0 0 0 1.11 1.11l2.79-.806c.303-.087.62-.037.89.117A9.95 9.95 0 0 0 12 22Z" stroke="currentColor" stroke-width="1.8"/></svg>
    <div style="display:flex;flex-direction:column;align-items:flex-start;line-height:1.1">
      <span>T∆∞ v·∫•n c√πng AI</span>
      <small>Mi·ªÖn ph√≠ ‚Ä¢ 30 gi√¢y</small>
    </div>
  </button>
</div>

<!-- Overlay + Widget -->
<div class="overlay" id="overlay" role="dialog" aria-modal="true" aria-label="AI Chat">
  <div class="widget" role="document">
    <div class="wTop">
      <div class="wTitle">
        <b>Tr·ª£ l√Ω AI TPCN</b>
        <small><span id="dot" class="statusDot"></span><span id="status">ƒêang ki·ªÉm tra k·∫øt n·ªëi‚Ä¶</span></small>
      </div>
      <div class="wBtns">
        <button class="iconBtn" id="btnClear" title="Xo√° h·ªôi tho·∫°i">üßπ</button>
        <button class="iconBtn" id="btnClose" title="ƒê√≥ng">‚úï</button>
      </div>
    </div>

    <div class="wBody" id="chat"></div>

    <div class="wDock">
      <div class="composer">
        <textarea id="txt" placeholder="Nh·∫≠p c√¢u h·ªèi‚Ä¶ (VD: ƒêau d·∫° d√†y d√πng s·∫£n ph·∫©m n√†o?)"></textarea>
        <button class="sendBtn" id="send"><span>G·ª≠i</span><span aria-hidden="true">‚û§</span></button>
      </div>
      <div class="sub">
        <span>‚èé Enter g·ª≠i ‚Ä¢ Shift+Enter xu·ªëng d√≤ng</span>
        <span><a href="#" id="btnExample">G·ª£i √Ω c√¢u h·ªèi</a></span>
      </div>
    </div>
  </div>
</div>

<script>
  const API = location.origin;

  // UI elements
  const overlay = document.getElementById("overlay");
  const btnOpen = document.getElementById("btnOpen");
  const btnOpenTop = document.getElementById("btnOpenTop");
  const btnOpenHero = document.getElementById("btnOpenHero");
  const btnClose = document.getElementById("btnClose");
  const btnScroll = document.getElementById("btnScroll");

  const chat = document.getElementById("chat");
  const txt = document.getElementById("txt");
  const btnSend = document.getElementById("send");
  const btnClear = document.getElementById("btnClear");

  const ctaBar = document.getElementById("ctaBar");

  function updateCtas(ctas){
    if(!ctaBar) return;
    ctaBar.innerHTML = "";
    const list = Array.isArray(ctas) ? ctas : [];
    if(!list.length){ ctaBar.style.display = "none"; return; }
    list.forEach((c, i) => {
      const a = document.createElement(c.action === "link" ? "a" : "button");
      a.className = "ctaBtn" + (i===0 ? " primary" : "");
      const dot = document.createElement("span");
      dot.className = "dot";
      a.appendChild(dot);
      const t = document.createElement("span");
      t.textContent = c.label || "H√†nh ƒë·ªông";
      a.appendChild(t);

      if(c.action === "link"){
        a.href = c.url || "#";
        a.target = "_blank";
        a.rel = "noopener";
      }else{
        a.type = "button";
        a.onclick = () => {
          const p = (c.payload || "").trim();
          if(p) {
            txt.value = p;
            send();
          }
        };
      }
      ctaBar.appendChild(a);
    });
    ctaBar.style.display = "flex";
  }

  const btnExample = document.getElementById("btnExample");

  const dot = document.getElementById("dot");
  const statusEl = document.getElementById("status");

  function openChat(){
    overlay.classList.add("show");
    setTimeout(() => txt.focus(), 50);
    ping();
  }
  function closeChat(){
    overlay.classList.remove("show");
  }
  btnOpen.onclick = openChat;
  btnOpenTop.onclick = openChat;
  btnOpenHero.onclick = openChat;
  btnClose.onclick = closeChat;

  overlay.addEventListener("click", (e)=>{
    if(e.target === overlay) closeChat();
  });

  btnScroll.onclick = () => {
    const el = document.getElementById("ecosystem");
    if(el) el.scrollIntoView({behavior:"smooth"});
  };

  // formatting
  function escapeHtml(s){
    return s.replace(/[&<>"']/g, m => ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[m]));
  }
  function formatLite(md){
    let s = escapeHtml(String(md||""));
    s = s.replace(/\*\*(.+?)\*\*/g, "<b>$1</b>");
    s = s.replace(/\[([^\]]+?)\]\((https?:\/\/[^\s)]+)\)/g, '<a href="$2" target="_blank" rel="noopener" style="color:#24563c;text-decoration:underline;font-weight:800">$1</a>');
    s = s.replace(/^###\s*(.+)$/gm, "<b>$1</b>");
    s = s.replace(/\n/g, "<br>");
    return s;
  }
  function add(role, content){
    const row = document.createElement("div");
    row.className = "msg " + (role === "me" ? "me" : "bot");
    const b = document.createElement("div");
    b.className = "bubble";
    b.innerHTML = formatLite(content);
    row.appendChild(b);
    chat.appendChild(row);
    chat.scrollTop = chat.scrollHeight;
  }

  // "AI ƒëang suy nghƒ©..." professional phrases
  const THINKING = [
    "ƒêang suy nghƒ©‚Ä¶"
  ];
  let thinkTimer = null;
  let thinkIdx = 0;

  function showThinking(show){
    let el = document.getElementById("typing");
    if(show){
      if(el) return;
      el = document.createElement("div");
      el.id = "typing";
      el.className = "typing";
      el.innerHTML = '<span id="thinkText">'+THINKING[0]+'</span><span class="dots"><i></i><i></i><i></i></span>';
      chat.appendChild(el);
      chat.scrollTop = chat.scrollHeight;

      thinkIdx = 0;
      thinkTimer = setInterval(()=>{
        const tt = document.getElementById("thinkText");
        thinkIdx = (thinkIdx + 1) % THINKING.length;
        if(tt) tt.textContent = THINKING[thinkIdx];
      }, 1200);
    }else{
      if(thinkTimer){ clearInterval(thinkTimer); thinkTimer = null; }
      if(el) el.remove();
    }
  }

  async function ping(){
    try{
      const r = await fetch(API + "/health", {cache:"no-store"});
      const j = await r.json();
      dot.classList.remove("off");
      statusEl.textContent = "Online ‚Ä¢ " + (j.profile || "profile");
    }catch(_){
      dot.classList.add("off");
      statusEl.textContent = "Offline (kh√¥ng truy c·∫≠p ƒë∆∞·ª£c /health)";
    }
  }

  // simple session id for memory continuity
  function getSessionId(){
    const k = "tpcn_session_id";
    let v = localStorage.getItem(k);
    if(!v){
      v = "sess_" + Math.random().toString(16).slice(2) + "_" + Date.now().toString(16);
      localStorage.setItem(k, v);
    }
    return v;
  }

  async function send(){
    const m = txt.value.trim();
    if(!m) return;
    add("me", m);
    txt.value = "";
    btnSend.disabled = true;
    showThinking(true);

    try{
      const res = await fetch(API + "/chat", {
        method:"POST",
        headers:{ "Content-Type":"application/json" },
        body: JSON.stringify({ message: m, session_id: getSessionId() })
      });
      const data = await res.json();
      showThinking(false);
      add("bot", data.reply || "D·∫° em ch∆∞a nh·∫≠n ƒë∆∞·ª£c ph·∫£n h·ªìi h·ª£p l·ªá. Anh/ch·ªã th·ª≠ l·∫°i gi√∫p em nh√© ·∫°.");
    }catch(e){
      showThinking(false);
      add("bot", "D·∫° h·ªá th·ªëng ƒëang b·∫≠n ho·∫∑c l·ªói k·∫øt n·ªëi. Anh/ch·ªã th·ª≠ t·∫£i l·∫°i trang gi√∫p em nh√© ·∫°.");
    }finally{
      btnSend.disabled = false;
      txt.focus();
    }
  }

  btnSend.onclick = send;
  txt.addEventListener("keydown", (e) => {
    if(e.key === "Enter" && !e.shiftKey){
      e.preventDefault();
      send();
    }
  });

  btnClear.onclick = () => {
    chat.innerHTML = "";
    updateCtas([]);
    add("bot","D·∫° em ch√†o anh/ch·ªã üòä Em l√† **Tr·ª£ l√Ω AI t∆∞ v·∫•n TPCN thi√™n nhi√™n**. Anh/ch·ªã ƒëang quan t√¢m nh√≥m n√†o ·∫° (d·∫° d√†y/ƒë∆∞·ªùng huy·∫øt/m·ª° m√°u/gan/x∆∞∆°ng kh·ªõp/gi·∫•c ng·ªß‚Ä¶)?");
  };

  btnExample.onclick = (e) => {
    e.preventDefault();
    txt.value = "ƒêau d·∫° d√†y / tr√†o ng∆∞·ª£c th√¨ n√™n d√πng s·∫£n ph·∫©m ho·∫∑c combo n√†o? Cho em c√°ch d√πng v√† link ·∫°.";
    txt.focus();
  };

  // init greeting (only once per page load)
  add("bot","D·∫° em ch√†o anh/ch·ªã üòä Em l√† **Tr·ª£ l√Ω AI t∆∞ v·∫•n TPCN thi√™n nhi√™n**. Anh/ch·ªã ƒëang quan t√¢m nh√≥m n√†o ·∫° (d·∫° d√†y/ƒë∆∞·ªùng huy·∫øt/m·ª° m√°u/gan/x∆∞∆°ng kh·ªõp/gi·∫•c ng·ªß‚Ä¶)?");
</script>

</body>
</html>
